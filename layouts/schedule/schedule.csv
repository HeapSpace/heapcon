"Date", "Start Time", "End Time", "Tracks", "Session Title", "Description", "Speakers"
{{ $site := .Site -}}
{{ range $index, $day := .Site.Data.Konfa.days -}}
{{ $talks := index $site.Data.Agenda (printf "day%d" $day) -}}
{{ range $index, $talkorbreak := $talks -}}
{{ $timeStart := time (printf "%d-%02d-%02dT%02s:00" $site.Data.Konfa.year $site.Data.Konfa.month $day .start) -}}
{{ $timeStart = time $timeStart.Unix -}}
{{ $timeEnd := "" -}}
{{ $timeEnd = $timeStart.Unix -}}
{{ $duration := mul (default 45 .duration) 60 -}}
{{ $timeEnd = time (add $timeEnd $duration ) -}}
{{ $date := "" -}}
{{ if eq $index 0 -}}
{{ $date = "September 26th" -}}
{{ else -}}
{{ $date = "September 27th" -}}
{{ end -}}
{{ $track := "" -}}
{{ $talk := "" -}}
{{ $title := $talkorbreak.break -}}
{{ $content := "" -}}
{{ $speaker := "" -}}
{{ if isset $talkorbreak "talk" -}}
{{ $t := where $site.Pages "Params.id" $talkorbreak.talk -}}
{{ $track = $talkorbreak.track -}}
{{ $talk = index $t 0 -}}
{{ $title = $talk.Title -}}
{{ $content = $talk.Content | plainify | htmlUnescape | chomp -}}
{{ $speaker = $talk.Parent.Title -}}
{{ end -}}
{{ $date }}, {{ $timeStart -}}, {{ $timeEnd }}, {{ $track }}, {{ $title }}, {{ replace $content "\n" "" -}}, {{ $speaker }}
{{ end -}}
{{ end -}}